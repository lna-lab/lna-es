:begin
:param workBase => 'iaEjerK94G7h'
:param title => 'アプリの目的.md'
:param sourceType => 'local'
:param ingestedAt => 1755448018603
:param fingerprint => '2846d10f080bd63fbda4c8eef8973e08f7588bfd131051b2a6dd0d08686272a5'
:param language => 'unknown'
:param lengthHint => 62
:param ndc => [{code: '000', score: 0.1}, {code: '100', score: 0.1}, {code: '200', score: 0.1}]
:param kindle => [{category: 'Literature & Fiction', score: 0.1}, {category: 'Non-fiction', score: 0.1}, {category: 'Science & Technology', score: 0.1}]
:param segments => [{segmentId: 'iaEjerK94G7h_seg000', order: 0, timecode_ms: 0, key_terms: ['lna', 'リナラボ社からgithibを通じてossを公開することとしたんだ', 'https', 'github', 'com'], length_hint: 5, sentences: ['iaEjerK94G7h_sen0000', 'iaEjerK94G7h_sen0001', 'iaEjerK94G7h_sen0002', 'iaEjerK94G7h_sen0003', 'iaEjerK94G7h_sen0004']}, {segmentId: 'iaEjerK94G7h_seg001', order: 1, timecode_ms: 1000, key_terms: ['cli', '読書体験のようにテキストの順番で要素は12桁の英数字からなる一意のベースid', 'ミリ秒単位のタイムスタンプを付与', 'ノードに対するエンティティとエッジに対するタグはサブidを付与してネスト的に管理したい', 'ruri'], length_hint: 5, sentences: ['iaEjerK94G7h_sen0005', 'iaEjerK94G7h_sen0006', 'iaEjerK94G7h_sen0007', 'iaEjerK94G7h_sen0008', 'iaEjerK94G7h_sen0009']}, {segmentId: 'iaEjerK94G7h_seg002', order: 2, timecode_ms: 2000, key_terms: ['知性maxで提案してね', '期待してる'], length_hint: 2, sentences: ['iaEjerK94G7h_sen0010', 'iaEjerK94G7h_sen0011']}]
:param sentences => [{sentenceId: 'iaEjerK94G7h_sen0000', order: 0, ontoScores: {philosophy: 0.028696317339571713, history: 0.03228927281469584, science: 0.12821342668281968, technology: 0.09161344706600648, arts: 0.13106479767298126, literature: 0.08430224490865856, language: 0.12783648876863643, geography: 0.05311334822877542, education: 0.01687878840862771, psychology: 0.058498765533924114, economics: 0.07618409622662987, politics: 0.07731801177728605, culture: 0.04483369041459295, religion: 0.03864138506787031, society: 0.01051591908892371}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0001', order: 1, ontoScores: {philosophy: 0.07814720010551436, history: 0.09164702331216677, science: 0.031097450535268755, technology: 0.018441699332298698, arts: 0.010850382511362998, literature: 0.08463128508704068, language: 0.11225602981526701, geography: 0.010862791138959974, education: 0.006306127829426859, psychology: 0.06983992004202272, economics: 0.15771010372958635, politics: 0.049826385547750755, culture: 0.13172205885658558, religion: 0.023092935924819324, society: 0.12356860623192904}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0002', order: 2, ontoScores: {philosophy: 0.04489466726069759, history: 0.08341084623313978, science: 0.08766710923433185, technology: 0.13857036286588173, arts: 0.03308010860359189, literature: 0.11209975167733242, language: 0.0974648005913186, geography: 0.06558379318571453, education: 0.1305041014747004, psychology: 0.07631197850599665, economics: 0.01167513106557661, politics: 0.06756891804217403, culture: 0.01915089263172497, religion: 0.015081477724393104, society: 0.016936060903425833}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0003', order: 3, ontoScores: {philosophy: 0.11988938469069405, history: 0.11692717460685215, science: 0.003798788063196524, technology: 0.11175975635356501, arts: 0.028523954786183137, literature: 0.0533908225970956, language: 0.10512987989568878, geography: 0.008926402217450233, education: 0.0037110111492914626, psychology: 0.0552669383057907, economics: 0.05674929729033761, politics: 0.08062615928062172, culture: 0.05874783199429713, religion: 0.10986521538960765, society: 0.08668738337932821}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0004', order: 4, ontoScores: {philosophy: 0.0272659586959355, history: 0.11208017386245758, science: 0.04569174418150678, technology: 0.03778408452114065, arts: 0.11809638876842572, literature: 0.11491095057249869, language: 0.01842464018205975, geography: 0.10285677144764253, education: 0.12824242607606776, psychology: 0.0696254845836675, economics: 0.10040760162304582, politics: 0.031130652236888125, culture: 0.028572440316084847, religion: 0.0001640901970494334, society: 0.06474659273552913}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0005', order: 5, ontoScores: {philosophy: 0.004712091470825082, history: 0.05509839982543385, science: 0.07395772971009743, technology: 0.10367862967794537, arts: 0.007871274182545455, literature: 0.06251480393812164, language: 0.11064647467300076, geography: 0.09864922511346703, education: 0.10488135638684011, psychology: 0.06703768220855055, economics: 0.07992818023697705, politics: 0.028354551218171174, culture: 0.11754366946793321, religion: 0.007245256194233943, society: 0.07788067569585738}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0006', order: 6, ontoScores: {philosophy: 0.02360673444943679, history: 0.14006530765067143, science: 0.013420679116839446, technology: 0.11330754381499768, arts: 0.09085868121776117, literature: 0.021949703195168754, language: 0.06190561835984042, geography: 0.06454987302543366, education: 0.12951490026989174, psychology: 0.06983880443859071, economics: 0.057887462810508473, politics: 0.06731621266721019, culture: 0.024993758959294305, religion: 0.06166467461154356, society: 0.05912004541281159}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0007', order: 7, ontoScores: {philosophy: 0.040942039221899845, history: 0.10321611862420246, science: 0.020677945954146414, technology: 0.08922651916100163, arts: 0.11136808925519849, literature: 0.11833944677788397, language: 0.006081378445610555, geography: 0.02993650717090083, education: 0.09573631781712687, psychology: 0.01562861089729507, economics: 0.06312540134788189, politics: 0.09536881353290758, culture: 0.029692535338526945, religion: 0.07114495958018528, society: 0.1095153168752321}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0008', order: 8, ontoScores: {philosophy: 0.08827141589810036, history: 0.03615431949324425, science: 0.04371424448495492, technology: 0.0258620074210835, arts: 0.03137246033992595, literature: 0.02941154379505728, language: 0.039385947930884735, geography: 0.0901345127578746, education: 0.0888018309551442, psychology: 0.04631092680748927, economics: 0.0835603024556943, politics: 0.10675775320262076, culture: 0.10218886406650665, religion: 0.12241621641845626, society: 0.06565765397296293}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0009', order: 9, ontoScores: {philosophy: 0.03447141371666364, history: 0.010522361191111199, science: 0.11427736363140546, technology: 0.10024908330837667, arts: 0.12254795735600728, literature: 0.035499630304403396, language: 0.08163705184485828, geography: 0.06118172101859638, education: 0.005291080013936385, psychology: 0.00970862124473782, economics: 0.054161681067688046, politics: 0.10266368031838369, culture: 0.07960058552155747, religion: 0.11274765911463902, society: 0.07544011034763543}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0010', order: 10, ontoScores: {philosophy: 0.024522826756288002, history: 0.05459933136008628, science: 0.002738496054706494, technology: 0.006371272614175263, arts: 0.11822205970724901, literature: 0.03757757888242119, language: 0.13146760771939506, geography: 0.1027196008218458, education: 0.10996178201713747, psychology: 0.1413119901107578, economics: 0.07924361823238954, politics: 0.0015468008013401625, culture: 0.03995289031345083, religion: 0.028134665718389698, society: 0.12162947889036746}, aesthetic: null, vectorDim: 8, embeddingRef: ''}, {sentenceId: 'iaEjerK94G7h_sen0011', order: 11, ontoScores: {philosophy: 0.053729875417838566, history: 0.08167430488271916, science: 0.0005479713929916859, technology: 0.025677045769392427, arts: 0.0994183767029909, literature: 0.11479370604616294, language: 0.006683040823729003, geography: 0.08453775903532249, education: 0.004796096893494368, psychology: 0.10456415919318442, economics: 0.02218223247556033, politics: 0.11608941006249826, culture: 0.1283295032372966, religion: 0.11890007737767404, society: 0.038076440689144724}, aesthetic: null, vectorDim: 8, embeddingRef: ''}]
:param entities => [{entityId: 'iaEjerK94G7h_ent0000', label: 'リナラボ社からgithibを通じてossを公開することとしたんだ', type: 'concept', ontoWeights: {philosophy: 0.019137727018247654, history: 0.10299190433766293, science: 0.11070084226098498, technology: 0.0811992975954302, arts: 0.011445252792621267, literature: 0.08385048945587495, language: 0.09348422848189629, geography: 0.01907300032725817, education: 0.0795906484781119, psychology: 0.06363765454443131, economics: 0.03920819920651818, politics: 0.04085727958656491, culture: 0.09331935992345133, religion: 0.06061249340687278, society: 0.10089162258407323}, vec_ruri_v3: [0.563103494773825, 0.029559978914749374, 0.9611753510884765, 0.1288452697717769, 0.7197388988981933, 0.291869187639347, 0.8196127704720504, 0.6732500075674241], vec_qwen3_0p6b: [0.47711808373403386, 0.6261842867895605, 0.560860981811346, 0.3322565271055826, 0.5658581254325091, 0.611837636762103, 0.35895888896121964, 0.07789911376623693]}, {entityId: 'iaEjerK94G7h_ent0001', label: 'https', type: 'concept', ontoWeights: {philosophy: 0.020737184617989523, history: 0.09800489853146911, science: 0.09079060994918184, technology: 0.0309649928882211, arts: 0.014515626737507656, literature: 0.05295372774419177, language: 0.07032616253063659, geography: 0.10299899614267458, education: 0.11146835056728138, psychology: 0.05971971640993721, economics: 0.05605023872021665, politics: 0.08041462226935597, culture: 0.10504967497184446, religion: 0.05633200868845962, society: 0.04967318923103259}, vec_ruri_v3: [0.5314355345368993, 0.36742591214176257, 0.6870865519398583, 0.593605496127933, 0.7396339038938583, 0.6026713645220503, 0.10146997774647304, 0.6295457228627488], vec_qwen3_0p6b: [0.5169118655228915, 0.39474030909944235, 0.6068320204020554, 0.18861047304550216, 0.8304586721293621, 0.38955182691318, 0.22236661587277284, 0.2228229943400718]}, {entityId: 'iaEjerK94G7h_ent0002', label: 'github', type: 'concept', ontoWeights: {philosophy: 0.018541576772515216, history: 0.06206198767173441, science: 0.05694224582845232, technology: 0.05641148936554038, arts: 0.027512960293616776, literature: 0.07347518170324129, language: 0.13470735432425965, geography: 0.09161863008962212, education: 0.07928949220732658, psychology: 0.14150877626048491, economics: 0.04302179372807638, politics: 0.05759332315962273, culture: 0.06666129263489379, religion: 0.06676344447052933, society: 0.023890451490084168}, vec_ruri_v3: [0.9268822782562635, 0.34541324464513123, 0.7302039767096723, 0.11791088489619694, 0.4682988866086125, 0.25782488364025735, 0.2762354966639404, 0.46536380882659956], vec_qwen3_0p6b: [0.14987034318742432, 0.8760074962395626, 0.23770640682554267, 0.6830763772054048, 0.7378797117936183, 0.5365064231332038, 0.3046570955232958, 0.12389574003045678]}, {entityId: 'iaEjerK94G7h_ent0003', label: 'lna', type: 'concept', ontoWeights: {philosophy: 0.01415066449943468, history: 0.03882135452585274, science: 0.05438497059950034, technology: 0.12369522941783498, arts: 0.15517952375904556, literature: 0.01763611942939138, language: 0.0033785499003755127, geography: 0.08383915820385703, education: 0.06721572918858969, psychology: 0.1466466734011118, economics: 0.1344398713956597, politics: 0.07135819192523588, culture: 0.06127519697564768, religion: 0.025198696970549692, society: 0.002780069807913349}, vec_ruri_v3: [0.9067863840230198, 0.7742803133658811, 0.8453742459208018, 0.7154837850121185, 0.6914102337232818, 0.6129647803612884, 0.8511354850396761, 0.6120023728470351], vec_qwen3_0p6b: [0.3208648601737393, 0.9234607417945139, 0.5164129405915541, 0.35740694770192194, 0.9769389335735974, 0.7956443116114089, 0.6550949805958286, 0.07727520895198647]}, {entityId: 'iaEjerK94G7h_ent0004', label: 'com', type: 'concept', ontoWeights: {philosophy: 0.09903273007185671, history: 0.01971871372874441, science: 0.07172952520935294, technology: 0.09295955944481617, arts: 0.06930226678440533, literature: 0.04112652995080278, language: 0.0629242482207526, geography: 0.09219782884135014, education: 0.04768326771323922, psychology: 0.06834450078933464, economics: 0.09207665994143736, politics: 0.05915205736547407, culture: 0.0354529591161377, religion: 0.07853457057390917, society: 0.06976458224838689}, vec_ruri_v3: [0.12056442407483847, 0.7363807131234726, 0.7486661186581827, 0.24315905086913248, 0.06318677285528806, 0.6390474484219199, 0.8611090005208957, 0.35510760333830693], vec_qwen3_0p6b: [0.9817049238517426, 0.3069070712211436, 0.4810752440738061, 0.01648007942972718, 0.7579403127581383, 0.9051155807815213, 0.06447755067710714, 0.961968386140078]}, {entityId: 'iaEjerK94G7h_ent0005', label: 'lab', type: 'concept', ontoWeights: {philosophy: 0.09880704611226296, history: 0.0633222093482578, science: 0.10126685610367472, technology: 0.01248936363206707, arts: 0.05177030026881935, literature: 0.05590499299621656, language: 0.05962109079258743, geography: 0.0025530252731337374, education: 0.11168661712079218, psychology: 0.06189412869596826, economics: 0.10773902398648962, politics: 0.10066106355850095, culture: 0.07529363921936423, religion: 0.017287809666843453, society: 0.07970283322502159}, vec_ruri_v3: [0.9188894035737339, 0.7046974192077482, 0.49712781049821875, 0.1278190600274649, 0.49965098895462967, 0.7100005035958594, 0.43984143769858075, 0.3553181427167651], vec_qwen3_0p6b: [0.9393170554179825, 0.6757538924653458, 0.9125757494517248, 0.05023226820837823, 0.2577120082076275, 0.008714305694343394, 0.36150025654565643, 0.9475731796309759]}, {entityId: 'iaEjerK94G7h_ent0006', label: 'txtファイルを', type: 'concept', ontoWeights: {philosophy: 0.04103982069810295, history: 0.09164113489457888, science: 0.004144376028565072, technology: 0.006012611856350353, arts: 0.03218512482296625, literature: 0.11825948796054118, language: 0.14196636473472368, geography: 0.024059726702138698, education: 0.06592788372311913, psychology: 0.033114898621633845, economics: 0.016204859981705254, politics: 0.15119215183028295, culture: 0.10930201389369028, religion: 0.11924603586836376, society: 0.04570350838323764}, vec_ruri_v3: [0.30504647247998573, 0.5771038659745746, 0.36773655699578045, 0.30910263391877424, 0.19254747923226156, 0.39423049786637376, 0.807747347927453, 0.35412329766324], vec_qwen3_0p6b: [0.7390346376859919, 0.3830665561905543, 0.2606144015693197, 0.4477500320655119, 0.6379924350562252, 0.8927594708532972, 0.9878937222301335, 0.6681616761226955]}, {entityId: 'iaEjerK94G7h_ent0007', label: 'dockerdesktop上のneo4jコンテナを使いllmでcypherファイルからグラフ化しライブラリとする', type: 'concept', ontoWeights: {philosophy: 0.04235585408779683, history: 0.10182358438203017, science: 0.12816063714583692, technology: 0.01043332949644715, arts: 0.049912643153009494, literature: 0.052310229928020265, language: 0.030818216861043003, geography: 0.12645510208823224, education: 0.12155116917664095, psychology: 0.027040057397962128, economics: 0.055661948895982, politics: 0.036923339214826684, culture: 0.04403122068035589, religion: 0.10337724223014473, society: 0.06914542526167149}, vec_ruri_v3: [0.6543203628007487, 0.006325622842585976, 0.2631026824041044, 0.6873944624818746, 0.5411060587170267, 0.7613315624049984, 0.11783308124214165, 0.03518914894385661], vec_qwen3_0p6b: [0.8620720766268817, 0.6196217901214625, 0.42993125524013953, 0.7258853362330648, 0.17964959962549654, 0.7066231044408782, 0.09588974020879604, 0.8853009231104618]}, {entityId: 'iaEjerK94G7h_ent0008', label: '原文をdbには保持せず', type: 'concept', ontoWeights: {philosophy: 0.013516867643162279, history: 0.1371250209514816, science: 0.11965039188066309, technology: 0.014135425234270018, arts: 0.018914089094679263, literature: 0.11455918484543988, language: 0.04097220512851318, geography: 0.047687232462311345, education: 0.1330903685837429, psychology: 0.10964142202695562, economics: 0.01007369950135282, politics: 0.06817546575781666, culture: 0.068629162684532, religion: 0.00888707615355846, society: 0.09494238805152086}, vec_ruri_v3: [0.8645665762277083, 0.21782174501012985, 0.2705924474644773, 0.1604591690411281, 0.9801397951739119, 0.049217218577989885, 0.5097794487375576, 0.21272825087524527], vec_qwen3_0p6b: [0.6945616760326185, 0.2895953463131765, 0.9890924316587707, 0.008178316138861108, 0.5644931367444884, 0.03465956748639365, 0.9508054304726512, 0.809879063765661]}, {entityId: 'iaEjerK94G7h_ent0009', label: '文章のジャンルをndcリストjsonやkindleジャンルjsonリストを参考にしながら当てはめ', type: 'concept', ontoWeights: {philosophy: 0.11364409899235593, history: 0.07188887846157443, science: 0.021840211770372413, technology: 0.12044673754328866, arts: 0.06691040100079673, literature: 0.10359250220616394, language: 0.050057982258028336, geography: 0.05719087113765835, education: 0.08064993870449709, psychology: 0.03450662441561438, economics: 0.027078493229991972, politics: 0.023446440044679332, culture: 0.09398483014329215, religion: 0.08898160353311574, society: 0.045780386558570495}, vec_ruri_v3: [0.43097033555479547, 0.7915173106652222, 0.5362340346585319, 0.22126351168346903, 0.2375552135141371, 0.9700971401738476, 0.08149526267571938, 0.7961073279135503], vec_qwen3_0p6b: [0.43293343337351786, 0.8545193435760793, 0.2865980214376189, 0.7508697273426604, 0.29982545366900737, 0.05607220851181993, 0.5616196652789243, 0.6744301672156714]}, {entityId: 'iaEjerK94G7h_ent0010', label: '15ジャンルから成るオントロジーリストで重みづけをし', type: 'concept', ontoWeights: {philosophy: 0.10941701854552653, history: 0.12643202718283675, science: 0.02750186664403013, technology: 0.06391816044671962, arts: 0.05509219396936339, literature: 0.05055325985599473, language: 0.02736466050508423, geography: 0.059521703950905586, education: 0.09798145916867886, psychology: 0.0433040666664282, economics: 0.02896364928341481, politics: 0.035816086559171366, culture: 0.042556053934273794, religion: 0.11817111550551826, society: 0.11340667778205385}, vec_ruri_v3: [0.327618583400607, 0.8054659355736039, 0.8971475915388257, 0.8542784804608402, 0.6989449164205453, 0.00683075942086564, 0.17417223501769208, 0.9374843539727313], vec_qwen3_0p6b: [0.4341244473436957, 0.9895612123274692, 0.4128443285446761, 0.0870033515915547, 0.3419682746333761, 0.05308591131341234, 0.33608930992605024, 0.30918994666097366]}, {entityId: 'iaEjerK94G7h_ent0011', label: '読書体験のようにテキストの順番で要素は12桁の英数字からなる一意のベースid', type: 'concept', ontoWeights: {philosophy: 0.0757280893515949, history: 0.06048587393863809, science: 0.0843016100195346, technology: 0.0548372784098966, arts: 0.05547433790464031, literature: 0.07879651261569225, language: 0.014977385357595508, geography: 0.112719786914226, education: 0.06601715487402617, psychology: 0.09093114002346091, economics: 0.007792076602017504, politics: 0.04340002016157243, culture: 0.11002922164589267, religion: 0.06675755787160383, society: 0.07775195430960827}, vec_ruri_v3: [0.563893767868104, 0.05181604756240288, 0.8918750652931449, 0.6555743372153235, 0.640483687748048, 0.26322016047387387, 0.08389628326004339, 0.12487022328388497], vec_qwen3_0p6b: [0.960166638461954, 0.9207021052439762, 0.9468289230958782, 0.6337964846128293, 0.18141710844919046, 0.5677663793320668, 0.5659066327392878, 0.913502670312164]}, {entityId: 'iaEjerK94G7h_ent0012', label: 'ミリ秒単位のタイムスタンプを付与', type: 'concept', ontoWeights: {philosophy: 0.10855768214951453, history: 0.035690892885527924, science: 0.007951381615376238, technology: 0.07314911017941028, arts: 0.15150674542001877, literature: 0.07302516289527575, language: 0.0037419161770003385, geography: 0.08327781236191026, education: 0.0013347026661306755, psychology: 0.06751839367178486, economics: 0.035240872018814665, politics: 0.03631452930735802, culture: 0.14132550283500064, religion: 0.03363193377053371, society: 0.14773336204634335}, vec_ruri_v3: [0.6708090497227492, 0.2566788716461612, 0.4654355015801488, 0.5551863622044516, 0.6045078502905172, 0.8987775641641544, 0.40951695647512276, 0.05850603147708533], vec_qwen3_0p6b: [0.7218025632771679, 0.4012437888684548, 0.1926674823212473, 0.6950680795688008, 0.22846902664422353, 0.5082752755522584, 0.12493700155408327, 0.7571408236352397]}, {entityId: 'iaEjerK94G7h_ent0013', label: 'ノードに対するエンティティとエッジに対するタグはサブidを付与してネスト的に管理したい', type: 'concept', ontoWeights: {philosophy: 0.051962008870227276, history: 0.03127146931335658, science: 0.09542032213327413, technology: 0.08923015247935323, arts: 0.129839411779136, literature: 0.04321323727137396, language: 0.11437913548755958, geography: 0.09269944575074435, education: 0.007940146415751081, psychology: 0.030757767783062353, economics: 0.06210094049096201, politics: 0.11137854312566799, culture: 0.017760015642071757, religion: 0.08744459842110006, society: 0.034602805036359714}, vec_ruri_v3: [0.04391419099113747, 0.27696231904816215, 0.14606753300165554, 0.28267467095651067, 0.09967199531087789, 0.34125463588036353, 0.7100557343100701, 0.9282796270990822], vec_qwen3_0p6b: [0.282983960949878, 0.43729610640408345, 0.9770660365534083, 0.2068485926813145, 0.9929935524935627, 0.011671225173018995, 0.22553944454252872, 0.6141414719548632]}, {entityId: 'iaEjerK94G7h_ent0014', label: '日本語以外とプログラムコードなどのためのgguf形式モデル', type: 'concept', ontoWeights: {philosophy: 0.030281352808595428, history: 0.07829501133031012, science: 0.07709681997607229, technology: 0.07655737326014873, arts: 0.10973293518594908, literature: 0.024850686843685642, language: 0.07059505689822147, geography: 0.07347258410498739, education: 0.10101766577438925, psychology: 0.028197628039244495, economics: 0.028052370598800024, politics: 0.11679795761282892, culture: 0.023337636507774914, religion: 0.13993468506506548, society: 0.021780235993926814}, vec_ruri_v3: [0.005864543294576086, 0.1911905996325467, 0.0141579047856083, 0.9039849151603431, 0.3755410037257376, 0.11216914921222054, 0.2742872334413464, 0.13874376840256597], vec_qwen3_0p6b: [0.8015938468600659, 0.7402359926269952, 0.6992247935900624, 0.7011583602143296, 0.3690841718433927, 0.7764118632625107, 0.3953574758475985, 0.6723784729220825]}, {entityId: 'iaEjerK94G7h_ent0015', label: 'でベクトルもノードに付与し', type: 'concept', ontoWeights: {philosophy: 0.04600915597803991, history: 0.02978707113803977, science: 0.11644668977019325, technology: 0.11818090028817493, arts: 0.020734401002126566, literature: 0.030548939516679977, language: 0.10895093588845652, geography: 0.0993515279583191, education: 0.14277372221047946, psychology: 0.07041593276434405, economics: 0.009102696900817374, politics: 0.014385676079721658, culture: 0.07758836214159531, religion: 0.04186525682922809, society: 0.07385873153378399}, vec_ruri_v3: [0.3881193973642265, 0.2728391602662228, 0.16695797586534167, 0.24699268263265894, 0.29036764843875373, 0.8006911176154201, 0.6956673669214652, 0.10831304668045916], vec_qwen3_0p6b: [0.5954034644922857, 0.8171535449742396, 0.931522121428457, 0.6393827080288543, 0.6286650738328599, 0.24650968973848397, 0.4776532030616507, 0.6465633584764388]}, {entityId: 'iaEjerK94G7h_ent0016', label: 'グラフのcypherファイルだけをllm', type: 'concept', ontoWeights: {philosophy: 0.014012774793976255, history: 0.07296969661992643, science: 0.11738381401905311, technology: 0.0773111841258064, arts: 0.04412149968841219, literature: 0.0015855484469609092, language: 0.12493095637577394, geography: 0.0961852574824751, education: 0.07305210529615459, psychology: 0.003918463646458345, economics: 0.02002288474680128, politics: 0.08748344265926757, culture: 0.13149490929001556, religion: 0.11049324748036976, society: 0.025034215328548527}, vec_ruri_v3: [0.4991708906245741, 0.6059424926845262, 0.11358887759573832, 0.36056525380726434, 0.7518526465193484, 0.7275284040073363, 0.5885637970269104, 0.4831751999405346], vec_qwen3_0p6b: [0.7050407267256731, 0.724467332355433, 0.7737733145248648, 0.9265924165146308, 0.8142076617215407, 0.4409105689762097, 0.37332892224134806, 0.9758868995031015]}, {entityId: 'iaEjerK94G7h_ent0017', label: 'そのための要件定義書を作成したい', type: 'concept', ontoWeights: {philosophy: 0.0332067473931083, history: 0.04359079658943429, science: 0.10770982925213438, technology: 0.06683171622661618, arts: 0.06701778266476634, literature: 0.06268520857713052, language: 0.07345583509174206, geography: 0.010582287669869838, education: 0.09211825476743894, psychology: 0.06633385203602538, economics: 0.04714106806415334, politics: 0.11408580687369874, culture: 0.09664370150170981, religion: 0.028475783398939265, society: 0.09012132989323277}, vec_ruri_v3: [0.0013507308532101359, 0.4387605982427636, 0.9087151320386715, 0.610416507943013, 0.9381977720348539, 0.18139654366143831, 0.7588192219358817, 0.7794552193414359], vec_qwen3_0p6b: [0.8495796039671605, 0.7908360378897832, 0.7661031517937772, 0.013016854676635048, 0.64998771614506, 0.25331897866814, 0.569181726118337, 0.04205075730889318]}, {entityId: 'iaEjerK94G7h_ent0018', label: 'cli', type: 'concept', ontoWeights: {philosophy: 0.05721251303653414, history: 0.053618090602963325, science: 0.07223740813371596, technology: 0.010549464902217125, arts: 0.034483643241984566, literature: 0.10363592402237227, language: 0.0759813535126038, geography: 0.0934069400033097, education: 0.07237893784610468, psychology: 0.05529384224442281, economics: 0.0568345026655729, politics: 0.09022147539600225, culture: 0.0196058627406491, religion: 0.10300951858408523, society: 0.10153052306746203}, vec_ruri_v3: [0.58800439201704, 0.5018234368337257, 0.3078263525305128, 0.5070502219252493, 0.8755933781680866, 0.5131953393274507, 0.9655255460014865, 0.12876525436674846], vec_qwen3_0p6b: [0.9121731368983865, 0.3921168839030772, 0.7243019496349214, 0.7592807529234008, 0.54177665540942, 0.4151370956719699, 0.5184198353977928, 0.3300059742166188]}, {entityId: 'iaEjerK94G7h_ent0019', label: '実際のコーディングは', type: 'concept', ontoWeights: {philosophy: 0.09469685200860144, history: 0.07552126498992531, science: 0.04074467615533133, technology: 0.08943598978575869, arts: 0.04839096488824583, literature: 0.08887509993331696, language: 0.03200992374074658, geography: 0.0016181174714675743, education: 0.04591633603099052, psychology: 0.08693746420159632, economics: 0.09645729324711763, politics: 0.08615143686155616, culture: 0.0940199885646684, religion: 0.09162102727587998, society: 0.027603564844797333}, vec_ruri_v3: [0.8523661787486604, 0.29636360924311966, 0.01848722944299741, 0.1678491946674413, 0.9939697563552745, 0.9576120219936766, 0.5208743293334755, 0.08532080366232797], vec_qwen3_0p6b: [0.7899126338602784, 0.9067855570126783, 0.8772461677010931, 0.946126389412446, 0.8765010646024087, 0.5319772607022578, 0.35623115546149087, 0.6090557176673494]}, {entityId: 'iaEjerK94G7h_ent0020', label: 'vscodeターミナル上のclaudecodeを中心として', type: 'concept', ontoWeights: {philosophy: 0.028091140899340273, history: 0.09273988604273459, science: 0.049651428308893096, technology: 0.002781526744264488, arts: 0.04328546602275918, literature: 0.13125647517424208, language: 0.054997452675433975, geography: 0.09138970501620028, education: 0.06915277856444804, psychology: 0.13118156594853997, economics: 0.11114337205341027, politics: 0.025935681712597213, culture: 0.003496306707143542, religion: 0.12355270016745348, society: 0.0413445139625395}, vec_ruri_v3: [0.1307787144925432, 0.19704200464557864, 0.9544377069607858, 0.863394654861117, 0.9195429258058347, 0.7835895928317983, 0.022798354734559156, 0.6646714731897089], vec_qwen3_0p6b: [0.9009883657496948, 0.7357994526476008, 0.3897881703864484, 0.600353215211, 0.6144364753598135, 0.894290922709435, 0.2913846116447302, 0.21754583903288915]}, {entityId: 'iaEjerK94G7h_ent0021', label: 'グラフ内には原文そのものを持たないことでリーガルとし', type: 'concept', ontoWeights: {philosophy: 0.07534818896625561, history: 0.020379865347378522, science: 0.0897841892433408, technology: 0.09667788137455671, arts: 0.053005670076161374, literature: 0.10643903382935405, language: 0.09631011353059717, geography: 0.09255148684585669, education: 0.057202350930357165, psychology: 0.008841734027781004, economics: 0.08035447133172317, politics: 0.004768483909864695, culture: 0.04038705696603039, religion: 0.10968522078449183, society: 0.06826425283625077}, vec_ruri_v3: [0.21097304201685507, 0.7724443993174845, 0.13897244594926494, 0.9008988850915182, 0.38772375581128693, 0.44849594577439045, 0.9688914802112617, 0.821087732145698], vec_qwen3_0p6b: [0.9082170777737392, 0.7146626881735191, 0.6202152772226774, 0.9767111030065649, 0.4984061238588583, 0.7679577928684159, 0.9413854069264068, 0.23177940208386494]}, {entityId: 'iaEjerK94G7h_ent0022', label: '私的利用に限った蔵書', type: 'concept', ontoWeights: {philosophy: 0.11174520048499699, history: 0.07676470791940039, science: 0.10997443528207429, technology: 0.0024005168375989486, arts: 0.09570573699363216, literature: 0.01743991506082849, language: 0.04319636219087306, geography: 0.03481696022627907, education: 0.007735530658534071, psychology: 0.051344729100978856, economics: 0.11835203247135485, politics: 0.011513815856685627, culture: 0.06264414648374673, religion: 0.12492935776910442, society: 0.13143655266391216}, vec_ruri_v3: [0.545294432941075, 0.15173731223957743, 0.7603618227626131, 0.6678868671914893, 0.6516852149679294, 0.7992852383604648, 0.9057619005528991, 0.19182371521983954], vec_qwen3_0p6b: [0.20397022173674317, 0.1817050766936953, 0.4888664408994211, 0.09384749372081158, 0.012600723360327692, 0.5791060642788877, 0.711582923258078, 0.09058007820425762]}, {entityId: 'iaEjerK94G7h_ent0023', label: 'llmの長期記憶ベースとしての超長期の知的資産化を目指す', type: 'concept', ontoWeights: {philosophy: 0.0999501747212703, history: 0.08352826359825494, science: 0.012707432898606026, technology: 0.069558774755374, arts: 0.06429782746299269, literature: 0.0035543421288065763, language: 0.08340832325485655, geography: 0.06444153892360857, education: 0.07514067886262554, psychology: 0.05691701340106633, economics: 0.07867936268628495, politics: 0.08137634824129536, culture: 0.09403256048592723, religion: 0.06415045037574668, society: 0.06825690820328437}, vec_ruri_v3: [0.8848154002209054, 0.039219043338212245, 0.8305446820688765, 0.33109594977108203, 0.9208378363180302, 0.7421174973011849, 0.9483377818500761, 0.20552359150289068], vec_qwen3_0p6b: [0.8060885047437714, 0.7865619952004272, 0.37785888966280956, 0.5568984517512952, 0.4351152561457621, 0.9843815651541667, 0.7604044340455488, 0.9466446217081139]}, {entityId: 'iaEjerK94G7h_ent0024', label: '知性maxで提案してね', type: 'concept', ontoWeights: {philosophy: 0.006046394606991759, history: 0.12840687453339872, science: 0.07819766657498704, technology: 0.0965151071065397, arts: 0.020988910125459406, literature: 0.024472210135848896, language: 0.12284996372637075, geography: 0.05226104920307842, education: 0.12036302225962493, psychology: 0.014943812167502832, economics: 0.12414924108161225, politics: 0.06772734532233529, culture: 0.0473758957178873, religion: 0.047343200736400595, society: 0.04835930670196218}, vec_ruri_v3: [0.10044162676063939, 0.9553639991385682, 0.13800842510515188, 0.6925932923409734, 0.42049195256165217, 0.39272484555333553, 0.12024467977628739, 0.31209270241242115], vec_qwen3_0p6b: [0.5425481672290979, 0.9209353407716316, 0.22725491172136114, 0.3193877541031144, 0.5868033689559342, 0.6904635778959854, 0.5058032326015003, 0.977691739497145]}, {entityId: 'iaEjerK94G7h_ent0025', label: '期待してる', type: 'concept', ontoWeights: {philosophy: 0.12641033758422882, history: 0.08274036033875005, science: 0.11983538409695309, technology: 0.12440714494270881, arts: 0.05537231291030504, literature: 0.0882680238566818, language: 0.07040579449725107, geography: 0.010002784381637014, education: 0.05687387592165221, psychology: 0.004622402843224495, economics: 0.07553049477195103, politics: 0.08064524488641131, culture: 0.06828174372293244, religion: 0.03436801847922037, society: 0.002236076766092299}, vec_ruri_v3: [0.6585907065576103, 0.3402894135418094, 0.4365845886085351, 0.992855971219046, 0.40435045426303506, 0.5158073375724459, 0.012684050475760711, 0.17312640027930748], vec_qwen3_0p6b: [0.6387410533682527, 0.5006165550767142, 0.03373287054391794, 0.022929989843565313, 0.5883710102060493, 0.46958708956304573, 0.6851980174593265, 0.6280877367939276]}]
:param mentions => [{sentenceId: 'iaEjerK94G7h_sen0000', entityId: 'iaEjerK94G7h_ent0000', tag: 'リナラボ社からgithibを通じてossを公開することとしたんだ', ontoKey: 'science', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0001', entityId: 'iaEjerK94G7h_ent0001', tag: 'https', ontoKey: 'education', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0001', entityId: 'iaEjerK94G7h_ent0002', tag: 'github', ontoKey: 'psychology', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0002', entityId: 'iaEjerK94G7h_ent0003', tag: 'lna', ontoKey: 'arts', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0002', entityId: 'iaEjerK94G7h_ent0004', tag: 'com', ontoKey: 'philosophy', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0002', entityId: 'iaEjerK94G7h_ent0005', tag: 'lab', ontoKey: 'education', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0003', entityId: 'iaEjerK94G7h_ent0006', tag: 'txtファイルを', ontoKey: 'politics', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0003', entityId: 'iaEjerK94G7h_ent0007', tag: 'dockerdesktop上のneo4jコンテナを使いllmでcypherファイルからグラフ化しライブラリとする', ontoKey: 'science', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0004', entityId: 'iaEjerK94G7h_ent0008', tag: '原文をdbには保持せず', ontoKey: 'history', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0004', entityId: 'iaEjerK94G7h_ent0009', tag: '文章のジャンルをndcリストjsonやkindleジャンルjsonリストを参考にしながら当てはめ', ontoKey: 'technology', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0004', entityId: 'iaEjerK94G7h_ent0010', tag: '15ジャンルから成るオントロジーリストで重みづけをし', ontoKey: 'history', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0005', entityId: 'iaEjerK94G7h_ent0011', tag: '読書体験のようにテキストの順番で要素は12桁の英数字からなる一意のベースid', ontoKey: 'geography', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0005', entityId: 'iaEjerK94G7h_ent0012', tag: 'ミリ秒単位のタイムスタンプを付与', ontoKey: 'arts', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0005', entityId: 'iaEjerK94G7h_ent0013', tag: 'ノードに対するエンティティとエッジに対するタグはサブidを付与してネスト的に管理したい', ontoKey: 'arts', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0006', entityId: 'iaEjerK94G7h_ent0014', tag: '日本語以外とプログラムコードなどのためのgguf形式モデル', ontoKey: 'religion', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0006', entityId: 'iaEjerK94G7h_ent0015', tag: 'でベクトルもノードに付与し', ontoKey: 'education', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0006', entityId: 'iaEjerK94G7h_ent0016', tag: 'グラフのcypherファイルだけをllm', ontoKey: 'culture', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0007', entityId: 'iaEjerK94G7h_ent0017', tag: 'そのための要件定義書を作成したい', ontoKey: 'politics', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0008', entityId: 'iaEjerK94G7h_ent0018', tag: 'cli', ontoKey: 'literature', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0008', entityId: 'iaEjerK94G7h_ent0019', tag: '実際のコーディングは', ontoKey: 'economics', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0008', entityId: 'iaEjerK94G7h_ent0020', tag: 'vscodeターミナル上のclaudecodeを中心として', ontoKey: 'literature', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0009', entityId: 'iaEjerK94G7h_ent0021', tag: 'グラフ内には原文そのものを持たないことでリーガルとし', ontoKey: 'religion', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0009', entityId: 'iaEjerK94G7h_ent0022', tag: '私的利用に限った蔵書', ontoKey: 'society', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0009', entityId: 'iaEjerK94G7h_ent0023', tag: 'llmの長期記憶ベースとしての超長期の知的資産化を目指す', ontoKey: 'philosophy', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0010', entityId: 'iaEjerK94G7h_ent0024', tag: '知性maxで提案してね', ontoKey: 'history', weight: 1.0}, {sentenceId: 'iaEjerK94G7h_sen0011', entityId: 'iaEjerK94G7h_ent0025', tag: '期待してる', ontoKey: 'philosophy', weight: 1.0}]
:commit

// --- constraints ---
// Neo4j constraint definitions

// Ensure that each Work has a unique base identifier
CREATE CONSTRAINT work_baseId_unique IF NOT EXISTS
FOR (w:Work)
REQUIRE w.baseId IS UNIQUE;

// Ensure that each Segment has a unique base identifier
CREATE CONSTRAINT segment_baseId_unique IF NOT EXISTS
FOR (s:Segment)
REQUIRE s.baseId IS UNIQUE;

// Ensure that each Sentence has a unique base identifier
CREATE CONSTRAINT sentence_baseId_unique IF NOT EXISTS
FOR (s:Sentence)
REQUIRE s.baseId IS UNIQUE;

// Ensure that each Entity has a unique base identifier
CREATE CONSTRAINT entity_baseId_unique IF NOT EXISTS
FOR (e:Entity)
REQUIRE e.baseId IS UNIQUE;

// Ensure uniqueness on TagCatalog entries by scheme and code/category
CREATE CONSTRAINT tagCatalog_scheme_code_unique IF NOT EXISTS
FOR (t:TagCatalog)
REQUIRE (t.scheme, t.code) IS NODE KEY;

// --- work and classifications ---
MERGE (w:Work {baseId:$workBase})
SET w.title = $title, w.sourceType = $sourceType, w.ingestedAt = $ingestedAt, w.fingerprint = $fingerprint, w.language = $language, w.lengthHint = $lengthHint;

UNWIND $ndc AS ndcItem
MERGE (c:TagCatalog {scheme:"NDC", code:ndcItem.code})
MERGE (w)-[:CLASSIFIED_AS {scheme:"NDC", score:ndcItem.score}]->(c);

UNWIND $kindle AS kdItem
MERGE (k:TagCatalog {scheme:"Kindle", code:kdItem.category})
MERGE (w)-[:CLASSIFIED_AS {scheme:"Kindle", score:kdItem.score}]->(k);

// --- segments ---
UNWIND $segments AS seg
MERGE (s:Segment {baseId:seg.segmentId})
SET s.order = seg.order, s.timecode_ms = seg.timecode_ms, s.key_terms = seg.key_terms, s.length_hint = seg.length_hint
MERGE (w)-[:HAS_SEGMENT {order: seg.order}]->(s);

// --- sentences ---
UNWIND $sentences AS sen
MERGE (st:Sentence {baseId:sen.sentenceId})
SET st.order = sen.order, st.ontoScores = sen.ontoScores, st.aesthetic = sen.aesthetic, st.vectorDim = sen.vectorDim, st.embeddingRef = sen.embeddingRef;

// --- attach sentences to segments ---
UNWIND $segments AS seg
UNWIND range(0, size(seg.sentences)-1) AS idx
WITH seg, idx
MATCH (sg:Segment {baseId:seg.segmentId}), (st:Sentence {baseId:seg.sentences[idx]})
MERGE (sg)-[:HAS_SENTENCE {order: idx}]->(st);

// --- entities ---
UNWIND $entities AS ent
MERGE (e:Entity {baseId:ent.entityId})
SET e.label = ent.label, e.type = ent.type, e.ontoWeights = ent.ontoWeights, e.vec_ruri_v3 = ent.vec_ruri_v3, e.vec_qwen3_0p6b = ent.vec_qwen3_0p6b;

// --- mentions ---
UNWIND $mentions AS m
MATCH (st:Sentence {baseId:m.sentenceId}), (e:Entity {baseId:m.entityId})
MERGE (st)-[r:MENTIONS {tag:m.tag, ontoKey:m.ontoKey}]->(e)
SET r.weight = m.weight;
